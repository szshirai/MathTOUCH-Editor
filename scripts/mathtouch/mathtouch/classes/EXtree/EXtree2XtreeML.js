MathTOUCH.EXtree2XtreeML = function(){}MathTOUCH.EXtree2XtreeML.prototype.XtreeML = function(ex){    var ans;    switch(ex.type){        case MathTOUCH.EDIT:            ans="nEdit";            break;        case MathTOUCH.EMP:            if(ex.val=="") ans="nul";            else if(ex.val==" ") ans="n0"+ex.val;            else if(ex.val=="thinspace") ans="n1"+ex.val;            else if(ex.val=="medspace") ans="n2"+ex.val;            else if(ex.val=="thickspace") ans="n3"+ex.val;            else if(ex.val=="quad") ans="n4"+ex.val;            else if(ex.val=="qquad") ans="n5"+ex.val;            else ans="nul";            break;        case MathTOUCH.NUM:            if(ex.val.charAt(0)=='b') ans="N"+ex.val;            else ans="N "+ex.val;            break;        case MathTOUCH.VAR:            ans="V "+ex.val;            break;        case MathTOUCH.SYM:            ans="S "+ex.val;            break;        case MathTOUCH.TXT:            ans="t "+ex.val;            break;        case MathTOUCH.XTML:            ans=ex.val;            break;        case MathTOUCH.MAT:            ans="M"+String.fromCharCode('0'.charCodeAt(0)+ex.rownum)+ex.val+"(";            for(var i=0;i<ex.cnum-1;i++){                if(ex.ch[i]==null) ans=ans+"nul,";                else ans=ans+this.XtreeML(ex.ch[i])+",";            }            if(ex.ch[ex.cnum-1]==null) ans=ans+"nul)";            else ans=ans+this.XtreeML(ex.ch[ex.cnum-1])+")";            break;        default:            var excode=OTB.theEXcode(ex.key,ex.order);            switch(ex.type){                case MathTOUCH.OP1P: ans=excode+"("+this.XtreeML(ex.ch[0])+")";                        break;                case MathTOUCH.OP1A : ans=excode+"("+this.XtreeML(ex.ch[0])+")";                        break;                case MathTOUCH.OP1B: ans=excode+"("+this.XtreeML(ex.ch[0])+")";                        break;                case MathTOUCH.OP2C: ans=excode+"("+this.XtreeML(ex.ch[0])+","+this.XtreeML(ex.ch[1])+")";                        break;                case MathTOUCH.OP2P: ans=excode+"("+this.XtreeML(ex.ch[0])+","+this.XtreeML(ex.ch[1])+")";                        break;                case MathTOUCH.OP3P:	ans=excode+"("+this.XtreeML(ex.ch[0])+","+this.XtreeML(ex.ch[1])+","+this.XtreeML(ex.ch[2])+")";                        break;                case MathTOUCH.OP3T:	ans=excode+"("+this.XtreeML(ex.ch[0])+","+this.XtreeML(ex.ch[1])+","+this.XtreeML(ex.ch[2])+")";                        break;                default:                        ans="nul";            }    }    return ans;};